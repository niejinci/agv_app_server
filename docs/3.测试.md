[toc]
***

## 用 ros2 topic pub 为每种 command_type 发布一个消息

这里是为您准备的所有 `command_type` 对应的 `ros2 topic pub` 模拟命令。您可以直接复制到终端运行。

### 1. SET_OPERATING_MODE (设置操作模式)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_mode_01',
  command_type: 'SET_OPERATING_MODE',
  operating_mode: {
    mode: 'TEACHIN'
  }
}"

# TEACHIN
# MANUAL
```

## 2. 获取操作模式

```sh
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_sub_01',
  command_type: 'GET_OPERATING_MODE'
}"
```

### 2. RELOCATION (重定位)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_loc_01',
  command_type: 'RELOCATION',
  relocation: {
    x: 5.5,
    y: -2.3,
    theta: 1.57,
    map_id: 'warehouse_floor_1'
  }
}"
```

### 3. TRANSLATION (平移运动)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_trans_01',
  command_type: 'TRANSLATION',
  translation: {
    vx: 0.5,
    vy: 0.0,
    dist: 2.0,
    mode: 1
  }
}"
```
*(注：`mode: 1` 对应 `MODE_ODOM`，即里程计模式)*

### 4. ROTATION (原地旋转)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_rot_01',
  command_type: 'ROTATION',
  rotation: {
    angle: 3.14159,
    vw: 0.3
  }
}"
```

### 5. PALLET_ROTATION (托盘旋转)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_pallet_01',
  command_type: 'PALLET_ROTATION',
  pallet_rotation: {
    angle: 1.2,
    mode: 0
  }
}"
```
*(注：`mode: 0` 对应 `MODE_INCREMENTAL`，即增量模式)*

### 6. CANCEL_TASK (取消任务)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_cancel_01',
  command_type: 'CANCEL_TASK',
  cancel_task: {
    stop_right: true
  }
}"
```

### 7. REMOTE_CONTROL (遥控)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_rc_01',
  command_type: 'REMOTE_CONTROL',
  remote_control: {
    linear_x: 0.8,
    angular_z: -0.2
  }
}"
```

### 8. EMERGENCY_STOP (急停)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_estop_01',
  command_type: 'EMERGENCY_STOP',
  emergency_stop: {
    status: true
  }
}"
```

### 9. MANAGE_DATA_SUBSCRIPTION (开启数据订阅)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_sub_01',
  command_type: 'MANAGE_DATA_SUBSCRIPTION',
  manage_data_subscription: {
    topic: 'scan2pointcloud',
    action: 'start'
  }
}"
```

### 10. MANAGE_DATA_SUBSCRIPTION (关闭数据订阅)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_sub_02',
  command_type: 'MANAGE_DATA_SUBSCRIPTION',
  manage_data_subscription: {
    topic: 'sys_info',
    action: 'stop'
  }
}"
```

### 11. LIFTING (托盘举升)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_sub_02',
  command_type: 'LIFTING',
  lifting: {
    action: 'pick',
    height: 0.1
  }
}"
```

### 12. CLEAR_ERRORS(清除错误信息)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_sub_02',
  command_type: 'CLEAR_ERRORS',
}"
```

### 13. SOFT_RESET(软复位)
```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_sub_02',
  command_type: 'SOFT_RESET',
}"
```

### 14. 模拟发布 mqtt 连接的状态

```sh
ros2 topic pub --once /mqtt_state_topic agv_service/msg/MqttState "{
  online: true,
}"

# 开启/关闭rcs连接状态流
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_sub_01',
  command_type: 'MANAGE_DATA_SUBSCRIPTION',
  manage_data_subscription: {
    topic: 'mqtt_state_topic',
    action: 'stop'
  }
}"
```

### 15. 启用 mqtt 连接的状态 的订阅

```sh
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_sub_01',
  command_type: 'MANAGE_DATA_SUBSCRIPTION',
  manage_data_subscription: {
    topic: 'locationInfo',
    action: 'start'
  }
}"
```

### 17. 构造一个任务链即时动作

```sh
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_sub_01',
  command_type: 'START_TASK_CHAIN',
  task_chain: {
    max_speed: 0.3,
    map_id: 'warehouse_floor_1',
    loop: false,
    tasks: [
      {
        type: 'action',
        action: {
          category: 'instant',
          name: 'pick',
          height: 0.1
        }
      }
    ]
  }
}"
```

### 18. 设置 rcs 上下线

```sh
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_sub_01',
  command_type: 'SET_RCS_ONLINE',
  mqtt_state: {
    online: true
  }
}"
```
ros2 topic echo /mqtt_operate_topic

### 19. 设置状态流

```bash
ros2 topic pub --once /app_request_topic agv_app_msgs/msg/AppRequest "{
  request_id: 'req_sub_01',
  command_type: 'MANAGE_DATA_SUBSCRIPTION',
  manage_data_subscription: {
    topic: 'agv_state_topic',
    action: 'start'
  }
}"
```


而且人家也说了，他是看比较大的一个周期，至少三年，而不是几天，几个月，中间有波动很正常，人家说的这些你视而不见。硬是要证明他是错的，然后自己又是在他说的行业找一些杂毛股。

你上次说我对他深信不疑，有信仰，我是无语，人家说的有道理，结果也证明了他的观点，我肯定会多信点，但不是无脑相信，要是无脑相信，买了不动，现在 还要多赚点钱。

他没有让你买入，卖出，他只分享自己的观点，我们要做的是根据别人的观点来帮助自己决策。